# Scraper Configuration — books.toscrape.com
# MapLeads - Scraper Web Modulaire

# Configuration globale
concurrency: 2
output_dir: ./results

# Liste des scrapers à exécuter
scrapers:
  # Scraper: Livres à scraper
  - name: books-demo
    url: https://books.toscrape.com/
    headless: true
    viewport:
      width: 1920
      height: 1080
    steps:
      # Navigation vers la page d'accueil
      - action: navigate
        params:
          url: https://books.toscrape.com/
          timeout: 30000

      # Attendre que les livres soient chargés
      - action: wait
        params:
          selector: article.product_pod
          timeout: 10000

      # Extraire la liste des livres
      - action: extract
        params:
          selector: article.product_pod
          fields:
            - name: title
              selector: h3 a
              attribute: title
            - name: price
              selector: p.price_color
            - name: availability
              selector: p.instock.availability
            - name: link
              selector: h3 a
              attribute: href

      # Pagination pour parcourir toutes les pages
      - action: paginate
        params:
          selector: li.next a
          max_pages: 5
          itemSelector: article.product_pod
          fields:
            - name: title
              selector: h3 a
              attribute: title
            - name: price
              selector: p.price_color
            - name: availability
              selector: p.instock.availability
            - name: link
              selector: h3 a
              attribute: href
