# Scraper Configurable — Fichier de configuration
# MapLeads - Scraper Web Modulaire

# Configuration globale
concurrency: 2          # Nombre de scrapers en parallèle (défaut: 5)
output_dir: ./results   # Dossier de sortie des résultats

# Liste des scrapers à exécuter
scrapers:
  # ============================================================================
  # Scraper 1: Exemple de scraping de livres (site de test)
  # ============================================================================
  - name: books-demo
    url: https://books.toscrape.com/
    headless: true
    viewport:
      width: 1920
      height: 1080
    steps:
      # Navigation vers la page d'accueil
      - action: navigate
        params:
          url: https://books.toscrape.com/
          timeout: 30000

      # Attendre que les livres soient chargés
      - action: wait
        params:
          selector: article.product_pod
          timeout: 10000

      # Extraire la liste des livres
      - action: extract
        params:
          selector: article.product_pod
          fields:
            - name: title
              selector: h3 a
              attribute: title
            - name: price
              selector: p.price_color
            - name: availability
              selector: p.instock.availability
            - name: link
              selector: h3 a
              attribute: href

      # Pagination pour parcourir toutes les pages
      - action: paginate
        params:
          selector: li.next a
          max_pages: 5
          itemSelector: article.product_pod
          fields:
            - name: title
              selector: h3 a
              attribute: title
            - name: price
              selector: p.price_color
            - name: availability
              selector: p.instock.availability
            - name: link
              selector: h3 a
              attribute: href

  # ============================================================================
  # Scraper 2: Exemple avec formulaire de recherche
  # ============================================================================
  - name: quotes-demo
    url: https://quotes.toscrape.com/
    headless: true
    viewport:
      width: 1920
      height: 1080
    steps:
      # Navigation vers la page d'accueil
      - action: navigate
        params:
          url: https://quotes.toscrape.com/
          timeout: 30000

      # Attendre que les citations soient chargées
      - action: wait
        params:
          selector: div.quote
          timeout: 10000

      # Extraire les citations
      - action: extract
        params:
          selector: div.quote
          fields:
            - name: text
              selector: span.text
            - name: author
              selector: small.author
            - name: tags
              selector: div.tags a.tag

      # Pagination pour parcourir toutes les pages
      - action: paginate
        params:
          selector: li.next a
          max_pages: 3
          itemSelector: div.quote
          fields:
            - name: text
              selector: span.text
            - name: author
              selector: small.author
            - name: tags
              selector: div.tags a.tag
